电子科技大学信息与软件工程学院    实 验 报 告    学    号     2017221303013   姓    名        邹凯         （实验）	课程名称    数据库原理及应用 理论教师         文军        实验教师        何中海           电子科技大学教务处制表    电 子 科 技 大 学 实   验   报   告 学生姓名：邹凯		学号：2017221303013   指导教师：何中海   实验地点：信软楼303     实验时间：2019.6.14 一、实验名称：图书销售管理系统数据库SQL应用编程 二、实验学时：5 三、实验目的： 针对图书借阅管理数据库开发，掌握DDL、DML、DQL类型SQL语句在数据库操作访问中的应用方法，培养数据库SQL应用编程能力。同时也掌握基本的数据库触发器、存储过程编程方法，培养数据库后端编程能力。本实验还需要培养数据库SQL应用编程的复杂工程问题解决能力。 四、实验原理： 	SQL相关语句。 五、实验内容： （1）图书销售管理系统数据库BookSale创建操作 （2）在图书销售管理系统数据库BookSale中创建数据库表、视图、索引等对象 （3）对图书销售管理系统数据库表进行数据增、删、查、改SQL操作 （4）编写函数Pro_CurrentSale，实现当日图书销售量及销售金额汇总统计。 （5）编写过程语句块，实现对函数Pro_CurrentSale的调用，并输出统计结果。 （6）编写图书销售表Insert触发器Tri_InsertSale，实现图书库存数据同步修改处理。 （7）对图书销售表Insert触发器Tri_InsertSale程序进行功能验证。 六、实验器材（设备、元器件）： 装有Postgre11环境的WINDOWS PC机一台。 七、实验步骤： 	先建立数据库，然后分析数据库中的表种类，建立相应的表，执行增删改查的操作，然后编写并调用函数Pro_CurrentSale，最后编写触发器以及触发器对应的存储过程。 八、实验结果与分析（含重要数据结果分析或核心代码流程分析） 首先创建数据库  创建三个表，图书表，销售表，库存表     创建视图  创建索引  然后数据增删查改操作示例  编写函数Pro_CurrentSale，实现当日图书销售量及销售金额汇总统计。 create or replace function Pro_CurrentSale() returns record as  $$ 	declare count1 record; 	begin 		select sum(salenumber) as salenumber,sum(saleprice) as saleprice into count1 FROM saletable WHERE saledate=current_date; 		return count1; 	end $$ language plpgsql; 编写过程语句块，实现对函数Pro_CurrentSale的调用，并输出统计结果。 调用存储过程： Select Pro_CurrentSale(); 编写图书销售表Insert触发器Tri_InsertSale，实现图书库存数据同步修改处理。 首先建立触发器调用的存储过程 create or replace function Pro_InsertSale() returns trigger as $$ 	declare salenumber1 integer; 	begin 		select salenumber into salenumber1 FROM saletable; 		update storetable set storenumber = storenumber-salenumber1 where new.shopid=shopid and new.isbn=isbn; 		return null; 	end $$ language plpgsql; 然后建立需要的触发器 create trigger Tri_InsertSale AFTER INSERT ON saletable FOR EACH ROW EXECUTE PROCEDURE Pro_InsertSale(); 总结及心得体会： 创建数据库并对数据操作是一个简单但是繁琐的过程，其中有许多SQL语句操作，在实验过程中我对其了解更多了，学到了许多知识。 十、对本实验过程及方法、手段的改进建议：无                                                      报告评分：                                          指导教师签字：  实验二 一、实验名称：图书销售管理系统数据库安全管理 二、实验学时：3学时 三、实验目的： 对图书销售管理系统数据库进行系统安全管理。了解该DBMS系统对数据库管理的内容与方法，特别是理解数据库安全机制和作用，以及PostgreSQL数据库角色管理、用户管理、权限管理的基本方法，培养数据库管理能力。在图书销售管理系统数据库中，创建必要的角色和用户，并完成上述角色与用户的权限管理。 四、实验原理： 相关SQL语句。 五、实验内容： （1）针对图书销售管理系统数据库，设计数据存取权限控制模型。 （2）在数据库中，创建客户（R_Customer）、商家（R_Seller）角色。 （3）在数据库中，根据业务规则为客户（R_Customer）、商家（R_Seller）角色赋予数据库对象权限。 （4）在数据库中，分别创建客户用户U_Customer、商家用户U_Seller。 （5）分别为客户用户U_Customer、商家用户U_Seller分派客户（R_Client）、商家（R_Seller）角色。 （6）分别以客户用户U_Customer、商家用户U_Seller身份访问图书销售管理数据库，验证所实现数据存取权限控制模型的正确性。 六、实验器材（设备、元器件）：   具有WINDOWS10系统的计算机一台。 七、实验步骤： 首先分析角色的种类以及其该拥有的权限，然后创建角色，并为其赋予角色权限，进而创建用户，为用户赋予角色，使其拥有角色的权限。 八、实验结果与分析（含重要数据结果分析或核心代码流程分析）： 创建角色  赋予权限  创建用户  九、总结及心得体会： 对于数据库的权限控制，可以先将用户划分为几类角色，然后对每一类的角色赋予相应的权限即可很好的实现,而不必为每个用户逐个授权，这尤其适用于用户量较多的系统中。  十、对本实验过程及方法、手段的改进建议：无                                                      报告评分：                                          指导教师签字： 