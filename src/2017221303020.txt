电子科技大学信息与软件工程学院    实 验 报 告    学    号     2017221303020     姓    名       唐金森          （实验）	课程名称    数据库原理及应用   理论教师       文军            实验教师       何中海              电子科技大学教务处制表    电 子 科 技 大 学 实   验   报   告 学生姓名：唐金森		学号：2017221303020    指导教师：何中海 实验地点：信软实验楼303     实验时间：2019/6/14 一、实验名称：图书销售管理系统数据库SQL应用编程 二、实验学时：5学时 三、实验目的： 针对图书借阅管理数据库开发，掌握DDL、DML、DQL类型SQL语句在数据库操作访问中的应用方法，培养数据库SQL应用编程能力。同时也掌握基本的数据库触发器、存储过程编程方法，培养数据库后端编程能力。本实验还需要培养数据库SQL应用编程的复杂工程问题解决能力。 四、实验原理： SQL语句相关知识。 五、实验内容： （1）图书销售管理系统数据库BookSale创建操作 （2）在图书销售管理系统数据库BookSale中创建数据库表、视图、索引等对象 （3）对图书销售管理系统数据库表进行数据增、删、查、改SQL操作 （4）编写函数Pro_CurrentSale，实现当日图书销售量及销售金额汇总统计。 （5）编写过程语句块，实现对函数Pro_CurrentSale的调用，并输出统计结果。 （6）编写图书销售表Insert触发器Tri_InsertSale，实现图书库存数据同步修改处理。 （7）对图书销售表Insert触发器Tri_InsertSale程序进行功能验证。 六、实验器材（设备、元器件）： 实验PC计算机 PostgreSQL 11 七、实验步骤： 创建数据库BookSale， 利用power designer设计数据库模型， power designer导出sql语句， 数据库执行sql语句， 执行增改删查的操作， 编写函数Pro_CurrentSale， 调用Pro_CurrentSale， 编写触发器Tri_InsertSale， 验证触发器Tri_InsertSale。 八、实验结果与分析（含重要数据结果分析或核心代码流程分析） create database booksale。  power designer设计模型：  导出sql语句：  导出的sql语句部分如下所示  执行sql语句（包括建表，建立索引，建立约束）：  实现增删查改： 插入地区表：  更新地区表：  查询：  删除：  创建存储过程：  为了验证，插入一组数据： insert into booktype values('001','教育'); insert into publisher values('001','高等教育出版社','18222222222','成华区'); insert into shop values('001','馋嘴小站','610000','成华区186号'); insert into book values('978-7-115-50274-2','001','001','数据库','2018-5-5','500','无','无'); insert into sale values('001','001','978-7-115-50274-2','2019-6-15','1','500'); insert into addrtable values('001','成都'); insert into author values('001','001','张大强','高新西区','18388888888'); insert into discount values('001','001','5','无'); insert into editorder values('001','001','001','1'); insert into store values('001','978-7-115-50274-2','100');  验证存储过程：  创建触发器函数：  创建触发器：  验证触发器： 在sale中插入一个数据：  发现store中对应数据减少一。  九、总结及心得体会： 触发器中类型要兼容，否则可能出现bug，导致自认为触发器没有工作。 十、对本实验过程及方法、手段的改进建议： 无。                                                      报告评分：                                          指导教师签字： 电子科技大学信息与软件工程学院    实 验 报 告    学    号     2017221303020     姓    名       唐金森          （实验）	课程名称    数据库原理及应用   理论教师       文军            实验教师       何中海              电子科技大学教务处制表    电 子 科 技 大 学 实   验   报   告 学生姓名：唐金森		学号：2017221303020    指导教师：何中海 实验地点：信软实验楼303     实验时间：2019/6/21 一、实验名称：图书销售管理系统数据库安全管理 二、实验学时：3学时 三、实验目的： 对图书销售管理系统数据库进行系统安全管理。了解该DBMS系统对数据库管理的内容与方法，特别是理解数据库安全机制和作用，以及PostgreSQL数据库角色管理、用户管理、权限管理的基本方法，培养数据库管理能力。在图书销售管理系统数据库中，创建必要的角色和用户，并完成上述角色与用户的权限管理。 四、实验原理： SQL语句相关知识。 五、实验内容： （1）针对图书销售管理系统数据库，设计数据存取权限控制模型。 （2）在数据库中，创建客户（R_Customer）、商家（R_Seller）角色。 （3）在数据库中，根据业务规则为客户（R_Customer）、商家（R_Seller）角色赋予数据库对象权限。 （4）在数据库中，分别创建客户用户U_Customer、商家用户U_Seller。 （5）分别为客户用户U_Customer、商家用户U_Seller分派客户（R_Client）、商家（R_Seller）角色。 （6）分别以客户用户U_Customer、商家用户U_Seller身份访问图书销售管理数据库，验证所实现数据存取权限控制模型的正确性。 六、实验器材（设备、元器件）： 实验PC计算机 PostgreSQL 11 七、实验步骤： 创建角色。 赋予角色权限。 创建用户。 赋予用户角色。 在命令行中以用户访问数据库。 八、实验结果与分析（含重要数据结果分析或核心代码流程分析） 创建角色：  赋予权限： 消费者：  销售员：  创建用户并分派角色：  用psql登陆consumer用户访问：  如图所示，他对库存表并无访问权限，而对图书表具有访问权限。 登陆seller用户访问：  九、总结及心得体会： 对于数据库，如果有一系列访问控制相同的用户，可以先设置成为角色。 十、对本实验过程及方法、手段的改进建议： 无。                                                      报告评分：                                          指导教师签字：   